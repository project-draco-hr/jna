{
  Pointer[] els;
  if (ref instanceof Union) {
    StructField sf=((Union)ref).biggestField;
    els=new Pointer[]{get(ref.getField(sf),sf.type),null};
  }
 else {
    els=new Pointer[ref.fields().size() + 1];
    int idx=0;
    for (Iterator i=ref.fields().values().iterator(); i.hasNext(); ) {
      StructField sf=(StructField)i.next();
      els[idx++]=get(ref.getField(sf),sf.type);
    }
  }
  init(els);
}
