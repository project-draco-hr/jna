{
  if (nativeType == boolean.class || nativeType == Boolean.class) {
    memory.setInt(offset,Boolean.TRUE.equals(value) ? -1 : 0);
  }
 else   if (nativeType == byte.class || nativeType == Byte.class) {
    memory.setByte(offset,value == null ? 0 : ((Byte)value).byteValue());
  }
 else   if (nativeType == short.class || nativeType == Short.class) {
    memory.setShort(offset,value == null ? 0 : ((Short)value).shortValue());
  }
 else   if (nativeType == char.class || nativeType == Character.class) {
    memory.setChar(offset,value == null ? 0 : ((Character)value).charValue());
  }
 else   if (nativeType == int.class || nativeType == Integer.class) {
    memory.setInt(offset,value == null ? 0 : ((Integer)value).intValue());
  }
 else   if (nativeType == long.class || nativeType == Long.class) {
    memory.setLong(offset,value == null ? 0 : ((Long)value).longValue());
  }
 else   if (nativeType == float.class || nativeType == Float.class) {
    memory.setFloat(offset,value == null ? 0f : ((Float)value).floatValue());
  }
 else   if (nativeType == double.class || nativeType == Double.class) {
    memory.setDouble(offset,value == null ? 0.0 : ((Double)value).doubleValue());
  }
 else   if (nativeType == Pointer.class) {
    memory.setPointer(offset,(Pointer)value);
  }
 else   if (nativeType == String.class) {
    memory.setPointer(offset,(Pointer)value);
  }
 else   if (nativeType == WString.class) {
    memory.setPointer(offset,(Pointer)value);
  }
 else   if (Structure.class.isAssignableFrom(nativeType)) {
    Structure s=(Structure)value;
    if (ByReference.class.isAssignableFrom(nativeType)) {
      memory.setPointer(offset,s == null ? null : s.getPointer());
      if (s != null && s.getAutoWrite()) {
        s.write();
        if (s.array != null) {
          for (int i=1; i < s.array.length; i++) {
            s.array[i].write();
          }
        }
      }
    }
 else {
      s.useMemory(memory,offset);
      s.write();
    }
  }
 else   if (Callback.class.isAssignableFrom(nativeType)) {
    memory.setPointer(offset,CallbackReference.getFunctionPointer((Callback)value));
  }
 else   if (Buffer.class.isAssignableFrom(nativeType)) {
    Pointer p=value == null ? null : Native.getDirectBufferPointer((Buffer)value);
    memory.setPointer(offset,p);
  }
 else   if (nativeType.isArray()) {
    return writeArrayValue(offset,value,nativeType.getComponentType());
  }
 else {
    return false;
  }
  return true;
}
