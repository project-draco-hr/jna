{
  if (Structure.class.isAssignableFrom(type)) {
    Structure s=(Structure)value;
    int size=s.size();
    structAlignment=Math.max(s.structAlignment,structAlignment);
    return size;
  }
  if (type.isArray()) {
    int len=Array.getLength(value);
    if (len > 0) {
      Object o=Array.get(value,0);
      int size=len * getNativeSize(type.getComponentType(),o);
      structAlignment=Math.max(size,structAlignment);
      return size;
    }
  }
  int size=getNativeSize(type);
  structAlignment=Math.max(size,structAlignment);
  return size;
}
