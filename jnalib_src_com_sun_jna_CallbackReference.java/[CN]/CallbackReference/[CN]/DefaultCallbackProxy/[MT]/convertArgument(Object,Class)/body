{
  if (value instanceof Pointer) {
    if (dstType == String.class) {
      value=((Pointer)value).getString(0);
    }
 else     if (dstType == WString.class) {
      value=new WString(((Pointer)value).getString(0,true));
    }
 else     if (Callback.class.isAssignableFrom(dstType)) {
      value=getCallback(dstType,(Pointer)value);
    }
 else     if (Structure.class.isAssignableFrom(dstType)) {
      Structure s=Structure.newInstance(dstType);
      Pointer old=s.getPointer();
      s.useMemory((Pointer)value);
      s.read();
      if (Structure.ByValue.class.isAssignableFrom(dstType)) {
        s.useMemory(old);
        s.write();
      }
      value=s;
    }
  }
 else   if ((boolean.class == dstType || Boolean.class == dstType) && value instanceof Number) {
    value=Boolean.valueOf(((Number)value).intValue() != 0);
  }
  return value;
}
