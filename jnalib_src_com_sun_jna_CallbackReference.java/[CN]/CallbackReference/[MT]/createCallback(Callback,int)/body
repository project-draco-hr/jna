{
  Method[] mlist=callback.getClass().getMethods();
  for (int i=0; i < mlist.length; i++) {
    if (Callback.METHOD_NAME.equals(mlist[i].getName())) {
      Method m=mlist[i];
      Class[] paramTypes=m.getParameterTypes();
      Class rtype=m.getReturnType();
      if (paramTypes.length > Function.MAX_NARGS) {
        String msg="Method signature exceeds the maximum " + "parameter count: " + m;
        throw new IllegalArgumentException(msg);
      }
      return Function.createCallback(callback,m,paramTypes,rtype,callingConvention);
    }
  }
  String msg="Callback must implement method named '" + Callback.METHOD_NAME + "'";
  throw new IllegalArgumentException(msg);
}
