{
  if (returnType == null || returnType == void.class || returnType == Void.class) {
    invokeVoid(callingConvention,args);
    return null;
  }
 else   if (returnType == boolean.class || returnType == Boolean.class) {
    return new Boolean(invokeInt(callingConvention,args) != 0);
  }
 else   if (returnType == byte.class || returnType == Byte.class) {
    return new Byte((byte)invokeInt(callingConvention,args));
  }
 else   if (returnType == short.class || returnType == Short.class) {
    return new Short((short)invokeInt(callingConvention,args));
  }
 else   if (returnType == char.class || returnType == Character.class) {
    return new Character((char)invokeInt(callingConvention,args));
  }
 else   if (returnType == int.class || returnType == Integer.class) {
    return new Integer(invokeInt(callingConvention,args));
  }
 else   if (returnType == long.class || returnType == Long.class) {
    return new Long(invokeLong(callingConvention,args));
  }
 else   if (returnType == NativeLong.class) {
    return new NativeLong(NativeLong.SIZE == 8 ? invokeLong(callingConvention,args) : invokeInt(callingConvention,args));
  }
 else   if (returnType == float.class || returnType == Float.class) {
    return new Float(invokeFloat(callingConvention,args));
  }
 else   if (returnType == double.class || returnType == Double.class) {
    return new Double(invokeDouble(callingConvention,args));
  }
 else   if (returnType == String.class) {
    return invokeString(callingConvention,args,false);
  }
 else   if (returnType == WString.class) {
    return new WString(invokeString(callingConvention,args,true));
  }
 else   if (Pointer.class.isAssignableFrom(returnType)) {
    return invokePointer(callingConvention,args);
  }
 else   if (Structure.class.isAssignableFrom(returnType)) {
    Object result=invokePointer(callingConvention,args);
    if (result != null) {
      try {
        Structure s=(Structure)returnType.newInstance();
        s.useMemory((Pointer)result);
        s.read();
        result=s;
      }
 catch (      InstantiationException e) {
        throw new IllegalArgumentException("Instantiation of " + returnType + " failed: "+ e);
      }
catch (      IllegalAccessException e) {
        throw new IllegalArgumentException("Not allowed to instantiate " + returnType + ": "+ e);
      }
    }
    return result;
  }
  throw new IllegalArgumentException("Unsupported return type " + returnType);
}
