{
  if (System.getProperty("javawebstart.version") == null)   return null;
  try {
    final ClassLoader cl=Native.class.getClassLoader();
    Method m=(Method)AccessController.doPrivileged(new PrivilegedAction(){
      public Object run(){
        try {
          Method m=ClassLoader.class.getDeclaredMethod("findLibrary",new Class[]{String.class});
          m.setAccessible(true);
          return m;
        }
 catch (        Exception e) {
          return null;
        }
      }
    }
);
    String libpath=(String)m.invoke(cl,new Object[]{libName});
    if (libpath != null) {
      return new File(libpath).getParent();
    }
    String msg="Library '" + libName + "' was not found by class loader "+ cl;
    throw new IllegalArgumentException(msg);
  }
 catch (  Exception e) {
    return null;
  }
}
