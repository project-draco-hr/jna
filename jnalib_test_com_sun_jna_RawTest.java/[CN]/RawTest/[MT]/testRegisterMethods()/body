{
  String name="com.sun.jna.RawTest$MathLibrary";
  ClassLoader loader=new TestLoader();
  Class cls=Class.forName(name,true,loader);
  assertNotNull("Failed loading class",cls);
  WeakReference ref=new WeakReference(cls);
  loader=null;
  cls=null;
  System.gc();
  for (int i=0; i < 100 && ref.get() != null; i++) {
    try {
      Thread.sleep(1);
    }
  finally {
    }
  }
  assertNull("Registered methods not GC'd: " + ref.get(),ref.get());
}
