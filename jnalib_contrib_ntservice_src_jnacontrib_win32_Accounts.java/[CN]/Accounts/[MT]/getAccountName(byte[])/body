{
  Advapi32 advapi32;
  IntByReference cchName;
  IntByReference cchReferencedDomainName;
  PointerByReference peUse;
  String sidString=null;
  char[] lpName;
  char[] referencedDomainName;
  advapi32=Advapi32.INSTANCE;
  cchName=new IntByReference(0);
  cchReferencedDomainName=new IntByReference(0);
  peUse=new PointerByReference();
  advapi32.LookupAccountSid(null,sid,null,cchName,null,cchReferencedDomainName,peUse);
  lpName=new char[cchName.getValue()];
  referencedDomainName=new char[cchReferencedDomainName.getValue()];
  if (!advapi32.LookupAccountSid(null,sid,lpName,cchName,referencedDomainName,cchReferencedDomainName,peUse)) {
    lpName=null;
  }
  if (lpName != null) {
    return (Native.toString(lpName));
  }
 else {
    return (null);
  }
}
