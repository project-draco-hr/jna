{
  Advapi32Util.registryCreateKey(WinReg.HKEY_CURRENT_USER,"Software","JNA");
  Advapi32Util.registrySetIntValue(WinReg.HKEY_CURRENT_USER,"Software\\JNA","FourtyTwo",42);
  Advapi32Util.registrySetStringValue(WinReg.HKEY_CURRENT_USER,"Software\\JNA","42","FourtyTwo");
  byte[] dataWritten={0xD,0xE,0xA,0xD,0xB,0xE,0xE,0xF};
  Advapi32Util.registrySetBinaryValue(WinReg.HKEY_CURRENT_USER,"Software\\JNA","DeadBeef",dataWritten);
  TreeMap<String,Object> values=Advapi32Util.registryGetValues(WinReg.HKEY_CURRENT_USER,"Software\\JNA");
  assertEquals(3,values.keySet().size());
  assertEquals("FourtyTwo",values.get("42"));
  assertEquals(42,values.get("FourtyTwo"));
  byte[] dataRead=(byte[])values.get("DeadBeef");
  assertEquals(dataWritten.length,dataRead.length);
  for (int i=0; i < dataWritten.length; i++) {
    assertEquals(dataWritten[i],dataRead[i]);
  }
  Advapi32Util.registryDeleteKey(WinReg.HKEY_CURRENT_USER,"Software","JNA");
}
