{
synchronized (libraries) {
    for (Iterator i=libraries.values().iterator(); i.hasNext(); ) {
      Reference ref=(WeakReference)i.next();
      if (ref.get() == this) {
        i.remove();
      }
    }
  }
synchronized (this) {
    if (handle != 0) {
      Native.close(handle);
      handle=0;
    }
  }
}
