{
  Kernel32 kernel=Kernel32.INSTANCE;
  int ERRCODE=8;
  kernel.SetLastError(ERRCODE);
  int code=kernel.GetLastError();
  assertEquals("Wrong error value after SetLastError",ERRCODE,code);
  if (kernel.GetProcessId(null) == 0) {
    final int INVALID_HANDLE=6;
    code=kernel.GetLastError();
    assertEquals("Wrong error value after failed syscall",INVALID_HANDLE,code);
  }
 else {
    fail("GetProcessId(NULL) should fail");
  }
}
