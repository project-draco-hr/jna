{
  if (transparent) {
    int w=getWidth();
    int h=getHeight();
    if (w > 0 && h > 0) {
      BufferedImage buf=new BufferedImage(w,h,BufferedImage.TYPE_INT_ARGB);
      Graphics2D g=buf.createGraphics();
      g.setComposite(AlphaComposite.Clear);
      g.fillRect(0,0,w,h);
      g.setComposite(AlphaComposite.SrcOver);
      super.paint(g);
      g=(Graphics2D)gr.create();
      g.setComposite(AlphaComposite.Src);
      g.drawImage(buf,0,0,w,h,null);
      g.dispose();
    }
  }
 else {
    super.paint(gr);
  }
}
