{
  String path=System.getProperty("user.home");
  File deployment;
  if (Platform.isWindows()) {
    String vendor=System.getProperty("java.vm.vendor");
    if (vendor.indexOf(" ") != -1) {
      vendor=vendor.substring(0,vendor.indexOf(" "));
    }
    deployment=new File(path + "/Application Data/" + vendor+ "/Java/Deployment");
  }
 else   if (Platform.isMac()) {
    deployment=new File(path + "/Library/Caches/Java");
  }
 else {
    deployment=new File(path + "/.java/deployment");
  }
  if (!deployment.exists()) {
    throw new Error("The user deployment directory " + deployment + " does not exist; save Java Control Panel or Web Start settings to initialize it");
  }
  return new File(deployment,"deployment.properties");
}
