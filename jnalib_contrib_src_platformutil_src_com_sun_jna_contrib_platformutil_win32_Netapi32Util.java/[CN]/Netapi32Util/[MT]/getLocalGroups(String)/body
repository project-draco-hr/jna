{
  PointerByReference bufptr=new PointerByReference();
  IntByReference entriesRead=new IntByReference();
  IntByReference totalEntries=new IntByReference();
  try {
    int rc=Netapi32.INSTANCE.NetLocalGroupEnum(serverName,0,bufptr,LMCons.MAX_PREFERRED_LENGTH,entriesRead,totalEntries,null);
    if (LMErr.NERR_Success != rc || bufptr.getValue() == Pointer.NULL) {
      throw new LastErrorException(rc);
    }
    LMAccess.LOCALGROUP_INFO_0 group=new LMAccess.LOCALGROUP_INFO_0(bufptr.getValue());
    LMAccess.LOCALGROUP_INFO_0[] groups=(LOCALGROUP_INFO_0[])group.toArray(entriesRead.getValue());
    ArrayList<String> result=new ArrayList<String>();
    for (    LOCALGROUP_INFO_0 lgpi : groups) {
      result.add(lgpi.lgrui0_name.toString());
    }
    return result.toArray(new String[0]);
  }
  finally {
    if (bufptr.getValue() != Pointer.NULL) {
      int rc=Netapi32.INSTANCE.NetApiBufferFree(bufptr.getValue());
      if (LMErr.NERR_Success != rc) {
        throw new LastErrorException(rc);
      }
    }
  }
}
