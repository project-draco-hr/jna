{
  String encoding=System.getProperty("jna.encoding");
  if (encoding != null) {
    long len=indexOf(offset,(byte)0);
    if (len != -1) {
      if (len > Integer.MAX_VALUE) {
        throw new OutOfMemoryError("String exceeds maximum length");
      }
      byte[] data=getByteArray(offset,(int)len);
      try {
        return new String(data,encoding);
      }
 catch (      UnsupportedEncodingException e) {
      }
    }
  }
  return getString(offset,false);
}
