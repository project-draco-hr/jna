{
  String encoding=System.getProperty("jna.encoding");
  if (encoding != null) {
    int len=indexOf(offset,(byte)0);
    if (len != -1) {
      byte[] data=getByteArray(offset,len);
      try {
        return new String(data,encoding);
      }
 catch (      UnsupportedEncodingException e) {
      }
    }
  }
  return getString(offset,false);
}
