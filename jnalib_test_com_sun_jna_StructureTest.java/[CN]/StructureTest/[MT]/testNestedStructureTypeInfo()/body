{
class FFIType extends Structure {
    public FFIType(    Pointer p){
      useMemory(p);
      read();
    }
    public size_t size;
    public short alignment;
    public short type;
    public Pointer elements;
  }
  NestedTypeInfoStructure s=new NestedTypeInfoStructure();
  Pointer p=s.getTypeInfo();
  FFIType ffi_type=new FFIType(p);
  assertNotNull("Type info should not be null",p);
  Pointer els=ffi_type.elements;
  Pointer inner=s.inner.getTypeInfo();
  assertEquals("Wrong type information for 'inner' field",inner,els.getPointer(0));
  assertEquals("Wrong type information for integer field",s.getTypeInfo(new Integer(0)),els.getPointer(Pointer.SIZE));
  assertNull("Type element list should be null-terminated",els.getPointer(Pointer.SIZE * 2));
}
