{
  TestArrayByReference.ByReference s=new TestArrayByReference.ByReference();
  s.value1=22;
  s.array[0]=s;
  s.value2=42;
  s.write();
  TestArrayByReference s2=new TestArrayByReference(s.getPointer());
  assertEquals("value1 not properly read from Pointer",s.value1,s2.value1);
  assertEquals("array[0] not properly read from Pointer",s.array[0].getPointer(),s2.array[0].getPointer());
  assertEquals("value2 not properly read from Pointer",s.value2,s2.value2);
}
