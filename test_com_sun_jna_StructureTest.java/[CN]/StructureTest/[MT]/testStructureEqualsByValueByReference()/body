{
class TestStructure extends Structure {
{
      setFieldOrder(new String[]{"first","second","third"});
    }
    public int first;
    public int[] second=new int[4];
    public Pointer[] third=new Pointer[4];
    protected List getFieldOrder(){
      return Arrays.asList(new String[]{"first","second","third"});
    }
  }
class ByReference extends TestStructure implements Structure.ByReference {
  }
class ByValue extends TestStructure implements Structure.ByValue {
  }
  TestStructure s1=new TestStructure();
  TestStructure s2=new ByReference();
  TestStructure s3=new ByValue();
  int VALUE=99;
  s1.first=s2.first=s3.first=VALUE;
  assertTrue("Equals failed on identical ByReference",s1.equals(s2));
  assertTrue("Equals is not symmetric (ByReference)",s2.equals(s1));
  assertTrue("Equals failed on identical ByValue",s1.equals(s3));
  assertTrue("Equals is not symmetric (ByValue)",s3.equals(s1));
  assertTrue("Equals is not transitive (ByReference/ByValue)",s1.equals(s2) && s2.equals(s3) && s1.equals(s3));
}
