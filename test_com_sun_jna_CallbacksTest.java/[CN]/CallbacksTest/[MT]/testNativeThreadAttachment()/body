{
  final boolean[] called={false};
  final Set threads=new HashSet();
  int COUNT=10;
  CallbackThreadInitializer init=new CallbackThreadInitializer(){
    public String getName(){
      System.out.println("Thread initializer called on " + Thread.currentThread());
      return CallbacksTest.this.getName();
    }
  }
;
  TestLibrary.VoidCallback cb=new TestLibrary.VoidCallback(){
    public void callback(){
      System.out.println("in callback: " + Thread.currentThread());
      called[0]=true;
      threads.add(Thread.currentThread());
    }
  }
;
  Native.setCallbackThreadInitializer(cb,init);
  lib.callVoidCallbackThreaded(cb,COUNT,1000);
  Thread.sleep(10000);
}
