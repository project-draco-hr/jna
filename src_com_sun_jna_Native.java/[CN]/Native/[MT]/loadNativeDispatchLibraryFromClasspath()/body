{
  try {
    String prefix="com/sun/jna/" + getNativeLibraryResourcePrefix();
    File lib=extractFromResourcePath("jnidispatch",prefix,Native.class.getClassLoader());
    if (lib == null) {
      throw new UnsatisfiedLinkError("Could not find JNA native support");
    }
    System.load(lib.getAbsolutePath());
    nativeLibraryPath=lib.getAbsolutePath();
    if (isUnpacked(lib)) {
      deleteLibrary(lib);
    }
  }
 catch (  IOException e) {
    throw new UnsatisfiedLinkError(e.getMessage());
  }
}
